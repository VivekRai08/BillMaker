{{page-title "Invoice"}}

<div style="padding: 20px; background: white; min-height: 400px;">
  <h1 style="color: #333;">Invoice</h1>

  {{#if @model}}
    <!-- Invoice Header -->
    <div style="border: 2px solid #333; padding: 20px; margin: 20px 0; background: #f9f9f9;">
      <h2 style="margin: 0 0 10px 0; color: #333;">TAX INVOICE</h2>
      <div style="display: flex; justify-content: space-between;">
        <div>
          <h3 style="margin: 0 0 5px 0;">My Shop</h3>
          <p style="margin: 5px 0;">123 Business Street</p>
          <p style="margin: 5px 0;">City, State - 123456</p>
          <p style="margin: 5px 0;">GSTIN: 22AAAAA0000A1Z5</p>
        </div>
        <div>
          <p><strong>Invoice No:</strong> {{@model.id}}</p>
          <p><strong>Date:</strong> {{@model.createdAt}}</p>
          <p><strong>Customer:</strong> {{@model.customerName}}</p>
        </div>
      </div>
    </div>

    <!-- Invoice Items -->
    <div style="margin-bottom: 20px;">
      <h3>Items</h3>
      <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
        <thead>
          <tr style="background: #f0f0f0;">
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">S.No</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Product</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Qty</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Rate</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">GST</th>
            <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Total</th>
          </tr>
        </thead>
        <tbody>
          {{#each @model.items as |item index|}}
            <tr>
              <td style="padding: 10px; border: 1px solid #ddd;">{{index}}</td>
              <td style="padding: 10px; border: 1px solid #ddd;">{{item.productName}}</td>
              <td style="padding: 10px; border: 1px solid #ddd;">{{item.quantity}}</td>
              <td style="padding: 10px; border: 1px solid #ddd;">₹{{item.basePrice}}</td>
              <td style="padding: 10px; border: 1px solid #ddd;">{{item.gstRate}}%</td>
              <td style="padding: 10px; border: 1px solid #ddd;">₹{{item.subtotal}}</td>
            </tr>
          {{/each}}
        </tbody>
      </table>
    </div>

    <!-- Invoice Summary -->
    <div style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
      <div style="width: 300px; border: 1px solid #ddd; padding: 15px; background: #f9f9f9;">
        <h4 style="margin: 0 0 10px 0;">Bill Summary</h4>
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
          <span>Subtotal:</span>
          <span>₹{{@model.subtotal}}</span>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
          <span>CGST:</span>
          <span>₹{{@model.cgst}}</span>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
          <span>SGST:</span>
          <span>₹{{@model.sgst}}</span>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px; border-top: 1px solid #ddd; padding-top: 5px; font-weight: bold; font-size: 16px;">
          <span>Grand Total:</span>
          <span>₹{{@model.grandTotal}}</span>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div style="margin-top: 30px; text-align: center;">
      <button
        onclick="window.print()"
        style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px;"
      >
        Print Invoice
      </button>
      <button
        onclick="window.history.back()"
        style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer;"
      >
        Go Back
      </button>
    </div>

  {{else}}
   <div style="text-align: center; padding: 50px; background: #f8f9fa; border-radius: 8px; margin: 20px;">
     <h3>Invoice Not Found</h3>
     <p>The requested invoice could not be found.</p>
     <a href="/" style="padding: 10px 20px; background: #007bff; color: white; text-decoration: none; border-radius: 4px;">Back to Home</a>
   </div>
 {{/if}}

  <div style="margin-top: 20px; text-align: center;">
    <a href="/" style="padding: 10px 20px; background: #28a745; color: white; text-decoration: none; border-radius: 4px;">Back to Home</a>
  </div>
</div>